<?xml version="1.0" ?>
<robot name="wpr2_dual_arms" xmlns:xacro="http://ros.org/wiki/xacro">
  <xacro:property name="M_PI" value="3.1415926535897931" />
  <xacro:property name="length" value="0.3"/>
  <xacro:property name="width" value="0.4"/>
    <material name="white">
        <color rgba="1 1 1 1"/>
    </material>

    <material name="yellow">
        <color rgba="0.9 0.9 0.2 1"/> <!-- 偏黄色 -->
    </material>

    <link name="base_footprint"/>

    <joint name="base_joint" type="fixed">
    <parent link="base_footprint"/>
    <child link="base_link"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    </joint>

    <link name="base_link">
        <visual>
            <geometry>
              <mesh filename="package://wpr2_description/meshes/omni_4_dual_base.dae" scale="1 1 1"/>
            </geometry>
            <origin xyz="0 0 0.09" rpy="0 0 0"/>
        </visual>
    </link>

    <!-- Arm Unit -->
    <xacro:macro name="arm_unit" params="prefix x y z roll pitch yaw">
        <!-- joint 0 -->
        <link name = "${prefix}_link_0">
        <visual>
            <geometry>
                <mesh filename="package://wpr2_description/meshes/arm/joint_0.dae" scale="1 1 1"/>
            </geometry>
            <origin rpy = "0 0 ${M_PI}" xyz = "0 0 0"/>
            <material name="yellow"/>
        </visual>
        </link>
        <joint name="${prefix}_joint_0" type="fixed">
            <parent link="base_link"/>
            <child link="${prefix}_link_0"/>
            <origin xyz="${x} ${y} ${z}" rpy="${roll} ${pitch} ${yaw}"/> 
        </joint>

        <!-- joint 1 -->
        <link name = "${prefix}_link_1">
        <visual>
            <geometry>
                <mesh filename="package://wpr2_description/meshes/arm/joint_1.dae" scale="1 1 1"/>
            </geometry>
            <origin rpy = "0 0 0" xyz = "0 0.104 0.055"/>
            <material name="yellow"/>
        </visual>
        </link>
        <joint name="${prefix}_joint_1" type="continuous">
            <parent link="${prefix}_link_0"/>
            <child link="${prefix}_link_1"/>
            <origin xyz="0.0 0 0.062" rpy="0 0 0"/>
            <axis xyz="0 1 0"/>
        </joint>

        <!-- joint 2 -->
        <link name = "${prefix}_link_2">
        <visual>
            <geometry>
                <mesh filename="package://wpr2_description/meshes/arm/joint_2.dae" scale="1 1 1"/>
            </geometry>
            <origin rpy = "0 0 ${M_PI*0.5}" xyz = "0 0 -0.049"/>
            <material name="yellow"/>
        </visual>
        </link>
        <joint name="${prefix}_joint_2" type="continuous">
            <parent link="${prefix}_link_1"/>
            <child link="${prefix}_link_2"/>
            <origin xyz="0 0.104 0.1 " rpy="0 0 0"/>
            <axis xyz="0 0 1"/>
        </joint>

        <!-- joint 3 -->
        <link name = "${prefix}_link_3">
        <visual>
            <geometry>
                <mesh filename="package://wpr2_description/meshes/arm/joint_3.dae" scale="1 1 1"/>
            </geometry>
            <origin rpy = "0 0 0" xyz = "0 0 -0.053"/>
            <material name="yellow"/>
        </visual>
        </link>
        <joint name="${prefix}_joint_3" type="continuous">
            <parent link="${prefix}_link_2"/>
            <child link="${prefix}_link_3"/>
            <origin xyz="0 0 -0.1 " rpy="0 0 0"/>
            <axis xyz="0 1 0"/>
        </joint>

        <!-- joint 4 -->
        <link name = "${prefix}_link_4">
        <visual>
            <geometry>
                <mesh filename="package://wpr2_description/meshes/arm/joint_4.dae" scale="1 1 1"/>
            </geometry>
            <origin rpy = "0 0 ${M_PI}" xyz = "0 0 -0.085"/>
            <material name="yellow"/>
        </visual>
        </link>
        <joint name="${prefix}_joint_4" type="continuous">
            <parent link="${prefix}_link_3"/>
            <child link="${prefix}_link_4"/>
            <origin xyz="0 0 -0.1 " rpy="0 0 0"/>
            <axis xyz="0 0 1"/>
        </joint>

        <!-- joint 5 -->
        <link name = "${prefix}_link_5">
        <visual>
            <geometry>
                <mesh filename="package://wpr2_description/meshes/arm/joint_5.dae" scale="1 1 1"/>
            </geometry>
            <origin rpy = "0 0 ${M_PI}" xyz = "0 0 -0.121"/>
            <material name="yellow"/>
        </visual>
        </link>
        <joint name="${prefix}_joint_5" type="continuous">
            <parent link="${prefix}_link_4"/>
            <child link="${prefix}_link_5"/>
            <origin xyz="0 0 -0.135 " rpy="0 0 0"/>
            <axis xyz="0 1 0"/>
        </joint>

        <!-- finger 0-->
        <link name = "${prefix}_finger_0">
            <visual>
                <geometry>
                    <box size="0.02 0.02 0.08"/>
                </geometry>
                <origin rpy = "0 0 0" xyz = "0 0 -0.04"/>
                <material name="yellow"/>
            </visual>
        </link>
        <joint name = "${prefix}_finger_joint" type = "prismatic">
            <parent link = "${prefix}_link_5"/>
            <child link = "${prefix}_finger_0"/>
            <origin xyz = "0 0 -0.325"/>
            <axis xyz = "0 1 0"/>
            <limit effort = "1000.0" lower="0" upper="0.05" velocity="0.5"/>
        </joint>

        <!-- finger 1-->
        <link name = "${prefix}_finger_1">
            <visual>
                <geometry>
                    <box size="0.02 0.02 0.08"/>
                </geometry>
                <origin rpy = "0 0 0" xyz = "0 0 -0.04"/>
                <material name="yellow"/>
            </visual>
        </link>
        <joint name = "${prefix}_finger_joint_1" type = "prismatic">
            <parent link = "${prefix}_link_5"/>
            <child link = "${prefix}_finger_1"/>
            <origin xyz = "0 0 -0.325"/>
            <axis xyz = "0 -1 0"/>
            <limit effort = "1000.0" lower="0" upper="0.05" velocity="0.5"/>
            <mimic joint="${prefix}_finger_joint" multiplier="1" offset="0" />
        </joint>
    </xacro:macro>

    <!-- Right Arm -->
    <!-- <origin xyz="0.0 -0.126 1.155" rpy="0 0 3.14"/>-->
    <xacro:arm_unit prefix="right" x="0" y="-0.126" z="1.155" roll="0" pitch="0" yaw="${M_PI}"/>

    <!-- Left Arm -->
    <!-- <origin xyz="0.0 0.126 1.155" rpy="0 0 0"/>-->
    <xacro:arm_unit prefix="left" x="0" y="0.126" z="1.155" roll="0" pitch="0" yaw="0"/>

    <link name = "femto_base">
    <visual>
        <origin rpy = "0 0 0" xyz = "0 0 0"/>
        <geometry>
            <!-- <box size=".1 .25 .07"/> -->
            <box size="0 0 0"/>
        </geometry>
    </visual>
    </link>
    <joint name="femto_height" type="prismatic">
        <parent link="base_link"/>
        <child link="femto_base"/>
        <limit effort="1000.0" lower="0" upper="1.7" velocity="0.5"/>
        <origin xyz="0.05 0 0" rpy="0 -1.5707963 0"/>
    </joint>

    <link name = "camera_link">
    <visual>
        <origin xyz = "0 0 0" rpy = "0 0 0"/>
        <geometry>
            <mesh filename="package://wpr2_description/meshes/femto_bolt.dae" scale="1 1 1"/>
        </geometry>
    </visual>
    </link>

    <joint name="femto_pitch" type="revolute">
        <axis xyz="0 -1 0"/>
        <limit effort="1000.0" lower="-1.57" upper="1.57" velocity="0.5"/>
        <origin xyz="0 0 0" rpy="0 01.57 0" /> 
        <parent link="femto_base" />
        <child link="camera_link" />
    </joint>


</robot>
